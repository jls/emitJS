<html>
<head>
  <title>examples and scratch pad</title>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
  <script type="text/javascript" src="./emit.js"></script>
</head>
  
<body>
  
  <script type="text/javascript">
        
    var emitter = new emit.EventEmitter();
    
    var emitter2 = new emit.EventEmitter();
    
    function log(str){
      $('#msg').append("<div>" + str + "</div>");
    }
    emitter.addListener('test', function(msg){log(msg)})
    emitter.addListener('test2', function(){log('only once')}, null, true);
  
  </script>
  
  <div id="msg"></div>
  
  
  <script type="text/javascript">
    var TEST_EVENT = 'test';
    var TEST2_EVENT = 'test2';
    
    emitter.emit(TEST_EVENT, 'my test message');
    emitter.emit(TEST2_EVENT);
    emitter.emit(TEST_EVENT, 'my second message');
    emitter.emit(TEST2_EVENT);
    
    
    log('Emitting test event from emitter2');
    emitter2.emit(TEST_EVENT);
    
    var binding = new emit.Binding();
    binding.addListener(function(e){log('binding: ' + e)});
    
    binding.addListener(function(e){log('second binding: ' + e)}, true);
    
    binding.emit('the message');
    binding.emit('the other message');
    
    var pndt = {
      events: {
        videoPlayed: new emit.Binding(),
        videoStopped: new emit.Binding()
      }
    };
    
    pndt.events.videoPlayed.add(function(){log('videoPlayed event')});
    
    
    emitter.add('test3', pndt.events.videoPlayed.emit);
    emitter.emit('test3');
    
    log('firing videoPlayed event twice');
    pndt.events.videoPlayed.emit();
    pndt.events.videoPlayed.emit('hello');
    
    log('disabling the videoPlayed event');
    pndt.events.videoPlayed.active = false;
    pndt.events.videoPlayed.emit();
    
    log('re-enabling the video played event');
    pndt.events.videoPlayed.active = true;
    pndt.events.videoPlayed.emit();
    
    log('No conflicting');
    var newEmitter = emit.noConflict();
    var emitterInstance = new newEmitter.EventEmitter();
    emitterInstance.add('test', pndt.events.videoPlayed.emit);
    emitterInstance.emit(TEST_EVENT, 'my noConflict message');
    
    log(typeof emit);
    
   
    
  </script>
  
</body>

</html>